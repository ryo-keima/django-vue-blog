"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[133],{951:function(t,e,o){o.r(e),o.d(e,{default:function(){return b}});var n=o(252),r=o(963),s=o(577);const a=t=>((0,n.dD)("data-v-46d613ac"),t=t(),(0,n.Cn)(),t),c={class:"container mt-2"},u=a((()=>(0,n._)("h1",{class:"mb-3"},"Edit Your Comment",-1))),m=a((()=>(0,n._)("button",{class:"btn btn-success mt-3"},"Publish",-1))),i={key:0,class:"muted mt-2 error"};function l(t,e,o,a,l,d){return(0,n.wg)(),(0,n.iD)("div",c,[u,(0,n._)("form",{onSubmit:e[1]||(e[1]=(0,r.iM)(((...t)=>d.onSubmit&&d.onSubmit(...t)),["prevent"]))},[(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.commentBody=t),class:"form-control",rows:"10"},null,512),[[r.nr,l.commentBody]]),m],32),l.error?((0,n.wg)(),(0,n.iD)("p",i,(0,s.zw)(l.error),1)):(0,n.kq)("",!0)])}var d=o(718),h={name:"CommentEditor",props:{uuid:{type:String,required:!0}},data(){return{commentBody:null,articleSlug:null,error:null}},methods:{async onSubmit(){if(!this.commentBody)return void(this.error="You can't submit an empty comment!");if(this.commentBody.length>250)return void(this.error="Ensure comment has no more than 250 characters!");const t=`/api/v1/comments/${this.uuid}/`;try{await d.o.put(t,{content:this.commentBody}),this.$router.push({name:"article",params:{slug:this.articleSlug}})}catch(e){console.log(e),console.log(e.response),alert(e.response.statusText)}}},async beforeRouteEnter(t,e,o){const n=`/api/v1/comments/${t.params.uuid}/`;try{const t=await d.o.get(n);return o((e=>(e.commentBody=t.data.content,e.articleSlug=t.data.article_slug)))}catch(r){console.log(r)}}},p=o(744);const y=(0,p.Z)(h,[["render",l],["__scopeId","data-v-46d613ac"]]);var b=y}}]);
//# sourceMappingURL=comment-editor.34d85a93.js.map