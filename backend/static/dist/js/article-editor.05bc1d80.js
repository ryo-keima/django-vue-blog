"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[961],{709:function(t,e,r){r.r(e),r.d(e,{default:function(){return y}});var a=r(252),l=r(577),i=r(963);const s={class:"container my-2"},o=(0,a._)("h1",{class:"mb-3"},"Write a Article",-1),n={key:0,class:"alert alert-danger mt-2"},c=(0,a._)("button",{type:"submit",class:"btn btn-success mt-3"},"Publish",-1);function u(t,e,r,u,d,h){return(0,a.wg)(),(0,a.iD)("div",s,[o,d.error?((0,a.wg)(),(0,a.iD)("p",n,(0,l.zw)(d.error),1)):(0,a.kq)("",!0),(0,a._)("form",{onSubmit:e[2]||(e[2]=(0,i.iM)(((...t)=>h.onSubmit&&h.onSubmit(...t)),["prevent"]))},[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>d.articleTitle=t),placeholder:"Title",type:"text",class:"form-control mb-3",maxlength:"50"},null,512),[[i.nr,d.articleTitle]]),(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>d.articleBody=t),rows:"10",placeholder:"Contents",class:"form-control"},null,512),[[i.nr,d.articleBody]]),c],32)])}var d=r(718),h={name:"ArticleEditor",props:{slug:{type:String,required:!1}},data(){return{articleTitle:null,articleBody:null,error:null}},methods:{async performNetworkRequest(){let t="/api/v1/articles/",e="POST";void 0!==this.slug&&""!==this.slug&&(t+=`${this.slug}/`,e="PUT");try{const r=await(0,d.o)({method:e,url:t,data:{title:this.articleTitle,body:this.articleBody}});this.$router.push({name:"article",params:{slug:r.data.slug}})}catch(r){this.error=r.response.statusText}},onSubmit(){this.articleTitle?this.articleTitle.length>50?this.error="Ensure article title has no more than 50 characters!":this.articleBody?this.performNetworkRequest():this.error="You can't send an empty article contents!":this.error="You can't send an empty article title!"},created(){document.title="Editor - Django Vue Blog"}},async beforeRouteEnter(t,e,r){if(void 0===t.params.slug||""===t.params.slug)return r();{const e=`/api/v1/articles/${t.params.slug}/`;try{const t=await d.o.get(e);return r((e=>(e.articleTitle=t.data.title,e.articleBody=t.data.body)))}catch(a){console.log(a)}}}},m=r(744);const p=(0,m.Z)(h,[["render",u]]);var y=p}}]);
//# sourceMappingURL=article-editor.05bc1d80.js.map